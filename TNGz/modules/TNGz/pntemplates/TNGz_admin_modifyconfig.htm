<!--[*  $Id$  *]-->
<!--[include file="TNGz_admin_menu.htm"]-->
<div class="z-admincontainer">
 <h2><!--[gt text="Settings"]--></h2>

 <form class="z-adminform" action="<!--[pnmodurl modname="TNGz" type="admin" func="updateconfig"]-->" method="post" enctype="application/x-www-form-urlencoded">
  <div>
    <input type="hidden" name="authid" value="<!--[pnsecgenauthkey module="TNGz"]-->" />
    <fieldset>
        <legend><!--[gt text="Configuration status"]--></legend>
        <div class="z-adminformrow"><img src="images/icons/extrasmall/<!--[$tngrootpathimage]-->" alt="" />&nbsp;<!--[$tngrootpathsay|pnvarprepfordisplay]-->
        <br />
        <img src="images/icons/extrasmall/<!--[$tngfoundimage]-->" alt="" />&nbsp;<!--[$tngfound|pnvarprepfordisplay]-->
        <br />
        <img src="images/icons/extrasmall/<!--[$TNG_versionimage]-->" alt=""  />&nbsp;<!--[$TNG_versionsay|pnvarprepfordisplay]-->&nbsp;
        <!--[if $TNG_versioncheck ne 1]-->
        <!--[$TNG_versionlast|pnvarprepfordisplay]-->&nbsp;-->&nbsp;<!--[$TNG_version|pnvarprepfordisplay]-->
        <!--[/if]-->
        <br />
        <!--[versioncheck program=TNGz]-->
        <br />
        <!--[versioncheck program=TNG version=$TNG_version]-->
        <input type="hidden" name="tngversion" value="<!--[$TNG_version]-->" />
        <br />
        <!--[if $hashcheck eq true]-->
        <img src="images/icons/extrasmall/button_ok.gif" alt="" />&nbsp;<!--[gt text="The Password hash methods for Zikula and TNG match (%s)." tag1=$hashZikula]-->
        <!--[else]-->
        <img src="images/icons/extrasmall/error.gif" alt="" />&nbsp;<!--[gt text="Password hash methods should match to keep user passwrods in sync! (Zilula=%s TNG=%s)" tag1=$hashZikula tag2=$hashTNG]-->
        <!--[/if]-->
	&nbsp;<a href="<!--[pnmodurl modname=Users type=admin func=modifyconfig]-->"><!--[gt text="Change Zikula."]--></a>
        <!--[if $hashTNGchange eq true]-->	
        &nbsp;<!--[gt text="Change TNG: TNG Administration >> Setup >> Configuration tab >> General Settings >> Miscellaneous >> Encryption type."]-->
	<!--[else]-->
        &nbsp;<!--[gt text="For this version of TNG, the only supported hash method is 'md5'"]-->
	<!--[/if]-->

        </div>
        <div class="z-informationmsg"><!--[gt text="Want all green status for a good configuration"]--></div>
    </fieldset>

    <fieldset>
        <legend><!--[gt text="TNG installation location"]--></legend>
        <div class="z-adminformrow">
            <label for="tngz_tngmodule"><!--[$zikula|pnvarprepfordisplay]--></label>
            <input id="tngz_tngmodule" name="tngmodule" type="text" size="50" maxlength="250" value="<!--[$tngmodule|pnvarprepfordisplay]-->" />
        </div>
    </fieldset>

    <fieldset>
        <legend><!--[gt text="Guest Access"]--></legend>
        <div class="z-adminformrow">
            <label for="tngz_guest"><!--[gt text="Check to allow non-logged in Zikula user to have TNG Guest access "]--></label>
            <input id="tngz_guest" name="tngguest" type="checkbox" value="1"<!--[if $tngguest eq 1]--> checked="checked"<!--[/if]--> />
        </div>

        <div class="z-adminformrow">
            <label for="tngz_guestname"><!--[gt text="  - What username to use for the guest account"]--></label>
            <input id="tngz_guestname" name="tngguestname" type="text" size="10" maxlength="20" value="<!--[$tngguestname|pnvarprepfordisplay]-->" />
        </div>
        <div class="z-warningmsg"><!--[gt text="If enabled, please make sure in TNG's Users administration that the TNG user specified here has the level of access you want for a guest. Anyone not logged into Zikula will apear to TNG as this user."]--></div>
    </fieldset>

    <fieldset>
        <legend><!--[gt text="Zikula and TNG User Synchronization"]--></legend>

        <div class="z-adminformrow">
            <label for="tngz_users"><!--[gt text="Create TNG users from Zikula user information"]--></label>
            <input id="tngz_users" name="tngusers" type="checkbox" value="1"<!--[if $tngusers eq 1]--> checked="checked"<!--[/if]--> />
        </div>
        <div class="z-informationmsg"><!--[gt text="If enabled, the first time a logged in Zikula user accesses TNG, a TNG user with the same username is created "]--></div>

        <div class="z-adminformrow">
            <label for="tngz_living"><!--[gt text="  - Allow created user to view living"]--></label>
            <input id="tngz_living" name="tngliving" type="checkbox" value="1"<!--[if $tngliving eq 1]--> checked="checked"<!--[/if]--> />
        </div>

        <div class="z-adminformrow">
            <label for="tngz_gedcom"><!--[gt text="  - Allow created user to download GEDCOMs"]--></label>
            <input id="tngz_gedcom" name="tnggedcom" type="checkbox" value="1"<!--[if $tnggedcom eq 1]--> checked="checked"<!--[/if]--> />
        </div>

        <div class="z-adminformrow">
            <label for="tngz_lds"><!--[gt text="  - Allow created user to view LDS information"]--></label>
            <input id="tngz_lds" name="tnglds" type="checkbox" value="1"<!--[if $tnglds eq 1]--> checked="checked"<!--[/if]--> />
        </div>

       <div class="z-adminformrow">
           <label for="tngz_sync"><!--[gt text="  - Keep TNG user information up to date with changed Zikula user information"]--></label>
           <input id="tngz_sync" name="tngsync" type="checkbox" value="1"<!--[if $tngsync eq 1]--> checked="checked"<!--[/if]--> />
       </div>

       <div class="z-adminformrow">
           <label for="tngz_sync2"><!--[gt text="    (includes changes to Real Name, website, and email address)"]--></label>
       </div>
    </fieldset>

    <fieldset>  
        <legend><!--[gt text="Identify Primary Person"]--></legend>

        <div class="z-adminformrow">
            <label for="tngz_idtree"><!--[gt text="Tree that includes person"]--></label>
            <select id="tngz_idtree" name="tngzidtree"><!--[html_options values=$tngzidtreevalues output=$tngzidtreeoptions selected=$tngzidtree]--></select>
        </div>

        <div class="z-adminformrow">
            <label for="tngz_tngzid"><!--[gt text="TNG ID of person (must be in the Tree)"]--></label>
            <input id="tngz_tngzid" name="tngzid" type="text" size="7" maxlength="7" value="<!--[$tngzid|pnvarprepfordisplay]-->" />
            <span id="personidname"><!--[if $tngzidname]--><!--[$tngzidname]--><!--[/if]--></span>
        </div>
	
        <div class="z-informationmsg"><!--[gt text="These settings are optional.  If used, they allow for more personalized links in templates. For example, the example default 'home' page will add a link to display this person's ancestors.  If you do not want to use, then just leave this field blank."]--></div>	
    </fieldset>
    
    <fieldset>
        <legend><!--[gt text="Other Settings"]--></legend>
        <div class="z-adminformrow">
            <label for="tngz_homepage"><!--[gt text="Use TNGz's homepage instead of TNG's index page"]--></label>
            <input id="tngz_homepage" name="tngzhomepage" type="checkbox" value="1"<!--[if $tngzhomepage eq 1]--> checked="checked"<!--[/if]--> />
        </div>

        <div class="z-adminformrow">
            <label for="tngz_tngemail"><!--[gt text="Enable email address hiding/encoding (if you have email addresses in your TNG files)"]--></label>
            <select id="tngz_tngemail" name="tngemail"><!--[html_options values=$tngemailvalues output=$tngemailoptions selected=$tngemail]--></select>
        </div>
    </fieldset>

   <fieldset>
        <legend><!--[gt text="Cache"]--></legend>
        <div class="z-informationmsg"><!--[gt text="Using the cache can speed up the time it takes to generate blocks and plugins. Instead of making multiple requests to the TNG database, data that has already been calculated and stored in the cache can be retrieved more quickly."]--></div>

        <div class="z-adminformrow">
            <label for="tngz_tngzcachedb"><!--[gt text="TNG database change resets the cache"]--></label>
            <select id="tngz_tngzcachedb" name="tngzcachedb"><!--[html_options values=$tngzcachedbvalues output=$tngzcachedboptions selected=$tngzcachedb]--></select>
        </div>
        <div class="z-informationmsg"><!--[gt text="Checking the database update time does not work on all systems.  If you are having trouble with the cache, then turn this off."]--></div>
	
        <div class="z-adminformrow">
            <label for="tngz_tngzcachesec"><!--[gt text="Interval to refresh cache"]--></label>
            <select id="tngz_tngzcachesec" name="tngzcachesec"><!--[html_options values=$tngzcachesecvalues output=$tngzcachesecoptions selected=$tngzcachesec]--></select>
        </div>
        <div class="z-warningmsg"><!--[gt text="The cache will expire and reload when either condition occurs. Both settings must be 'off' to disable caching."]--></div>
	
        <div class="z-adminformrow">
	<!--[if $tngzcacheexists eq 1]-->
	    <img src="images/icons/extrasmall/folder_green.gif" alt="" /><a href="<!--[pnmodurl modname="TNGz" type="admin" func="cachedelete"]-->"><!--[gt text="Clear the cache"]--></a>
	<!--[else]-->
	    <img src="images/icons/extrasmall/folder_grey.gif" alt="" /><!--[gt text="No Cache"]-->
	<!--[/if]-->
	
        </div>
	
    </fieldset>


    <!--[pnmodcallhooks hookobject=module hookaction=modifyconfig module=Settings]-->
    <div class="z-adminformrow z-adminformbuttons">
       <!--[pnbutton src='button_ok.gif' set='icons/small' __alt="Update TNGz configuration" __title="Update TNGz configuration"]-->
       <a href="<!--[pnmodurl modname=TNGz type=admin]-->"><!--[pnimg modname='core' src='button_cancel.gif' set='icons/small'   __alt="Cancel" __title="Cancel"]--></a>
    </div>
  </div>
 </form>
</div>
